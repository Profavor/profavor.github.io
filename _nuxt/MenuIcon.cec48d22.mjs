import{e as F,T as N,F as A,M as $,o as m,c as B,u as L,l as y,P as M,t as T,p as j,R as D,b as d,g as K}from"./use-outside-click.dba50023.mjs";import{b as _,x as V,a as g}from"./use-resolve-button-type.7c80fd7a.mjs";import{K as O,a as k,v as h,m as x,N as U,M as E,z as W,f as R,O as H,o as q,c as z,H as J}from"./entry.b2d48240.mjs";function Q({container:n,accept:p,walk:b,enabled:f}){O(()=>{let e=n.value;if(!e||f!==void 0&&!f.value)return;let v=F(n);if(!v)return;let o=Object.assign(u=>p(u),{acceptNode:p}),c=v.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,o,!1);for(;c.nextNode();)b(c.currentNode)})}var G=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(G||{}),X=(n=>(n[n.Pointer=0]="Pointer",n[n.Other=1]="Other",n))(X||{});function Y(n){requestAnimationFrame(()=>requestAnimationFrame(n))}let C=Symbol("MenuContext");function P(n){let p=H(C,null);if(p===null){let b=new Error(`<${n} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(b,P),b}return p}let ae=k({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(n,{slots:p,attrs:b}){let f=h(1),e=h(null),v=h(null),o=h([]),c=h(""),u=h(null),I=h(1);function s(r=a=>a){let a=u.value!==null?o.value[u.value]:null,l=K(r(o.value.slice()),S=>m(S.dataRef.domRef)),i=a?l.indexOf(a):null;return i===-1&&(i=null),{items:l,activeItemIndex:i}}let t={menuState:f,buttonRef:e,itemsRef:v,items:o,searchQuery:c,activeItemIndex:u,activationTrigger:I,closeMenu:()=>{f.value=1,u.value=null},openMenu:()=>f.value=0,goToItem(r,a,l){let i=s(),S=V(r===g.Specific?{focus:g.Specific,id:a}:{focus:r},{resolveItems:()=>i.items,resolveActiveIndex:()=>i.activeItemIndex,resolveId:w=>w.id,resolveDisabled:w=>w.dataRef.disabled});c.value="",u.value=S,I.value=l!=null?l:1,o.value=i.items},search(r){let a=c.value!==""?0:1;c.value+=r.toLowerCase();let l=(u.value!==null?o.value.slice(u.value+a).concat(o.value.slice(0,u.value+a)):o.value).find(S=>S.dataRef.textValue.startsWith(c.value)&&!S.dataRef.disabled),i=l?o.value.indexOf(l):-1;i===-1||i===u.value||(u.value=i,I.value=1)},clearSearch(){c.value=""},registerItem(r,a){let l=s(i=>[...i,{id:r,dataRef:a}]);o.value=l.items,u.value=l.activeItemIndex,I.value=1},unregisterItem(r){let a=s(l=>{let i=l.findIndex(S=>S.id===r);return i!==-1&&l.splice(i,1),l});o.value=a.items,u.value=a.activeItemIndex,I.value=1}};return N([e,v],(r,a)=>{var l;t.closeMenu(),A(a,$.Loose)||(r.preventDefault(),(l=m(e))==null||l.focus())},x(()=>f.value===0)),U(C,t),B(x(()=>L(f.value,{[0]:y.Open,[1]:y.Closed}))),()=>{let r={open:f.value===0};return M({ourProps:{},theirProps:n,slot:r,slots:p,attrs:b,name:"Menu"})}}}),ne=k({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"}},setup(n,{attrs:p,slots:b,expose:f}){let e=P("MenuButton"),v=`headlessui-menu-button-${T()}`;f({el:e.buttonRef,$el:e.buttonRef});function o(s){switch(s.key){case d.Space:case d.Enter:case d.ArrowDown:s.preventDefault(),s.stopPropagation(),e.openMenu(),R(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(g.First)});break;case d.ArrowUp:s.preventDefault(),s.stopPropagation(),e.openMenu(),R(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(g.Last)});break}}function c(s){switch(s.key){case d.Space:s.preventDefault();break}}function u(s){n.disabled||(e.menuState.value===0?(e.closeMenu(),R(()=>{var t;return(t=m(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(s.preventDefault(),e.openMenu(),Y(()=>{var t;return(t=m(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let I=_(x(()=>({as:n.as,type:p.type})),e.buttonRef);return()=>{var s;let t={open:e.menuState.value===0},r={ref:e.buttonRef,id:v,type:I.value,"aria-haspopup":!0,"aria-controls":(s=m(e.itemsRef))==null?void 0:s.id,"aria-expanded":n.disabled?void 0:e.menuState.value===0,onKeydown:o,onKeyup:c,onClick:u};return M({ourProps:r,theirProps:n,slot:t,attrs:p,slots:b,name:"MenuButton"})}}}),le=k({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(n,{attrs:p,slots:b,expose:f}){let e=P("MenuItems"),v=`headlessui-menu-items-${T()}`,o=h(null);f({el:e.itemsRef,$el:e.itemsRef}),Q({container:x(()=>m(e.itemsRef)),enabled:x(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function c(t){var r;switch(o.value&&clearTimeout(o.value),t.key){case d.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case d.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let a=e.items.value[e.activeItemIndex.value];(r=m(a.dataRef.domRef))==null||r.click()}e.closeMenu(),R(()=>{var a;return(a=m(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})});break;case d.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(g.Next);case d.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(g.Previous);case d.Home:case d.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(g.First);case d.End:case d.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(g.Last);case d.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),R(()=>{var a;return(a=m(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})});break;case d.Tab:t.preventDefault(),t.stopPropagation();break;default:t.key.length===1&&(e.search(t.key),o.value=setTimeout(()=>e.clearSearch(),350));break}}function u(t){switch(t.key){case d.Space:t.preventDefault();break}}let I=j(),s=x(()=>I!==null?I.value===y.Open:e.menuState.value===0);return()=>{var t,r;let a={open:e.menuState.value===0},l={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(r=m(e.buttonRef))==null?void 0:r.id,id:v,onKeydown:c,onKeyup:u,role:"menu",tabIndex:0,ref:e.itemsRef};return M({ourProps:l,theirProps:n,slot:a,attrs:p,slots:b,features:D.RenderStrategy|D.Static,visible:s.value,name:"MenuItems"})}}}),oe=k({name:"MenuItem",props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1}},setup(n,{slots:p,attrs:b,expose:f}){let e=P("MenuItem"),v=`headlessui-menu-item-${T()}`,o=h(null);f({el:o,$el:o});let c=x(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===v:!1),u=x(()=>({disabled:n.disabled,textValue:"",domRef:o}));E(()=>{var a,l;let i=(l=(a=m(o))==null?void 0:a.textContent)==null?void 0:l.toLowerCase().trim();i!==void 0&&(u.value.textValue=i)}),E(()=>e.registerItem(v,u)),W(()=>e.unregisterItem(v)),O(()=>{e.menuState.value===0&&(!c.value||e.activationTrigger.value!==0&&R(()=>{var a,l;return(l=(a=m(o))==null?void 0:a.scrollIntoView)==null?void 0:l.call(a,{block:"nearest"})}))});function I(a){if(n.disabled)return a.preventDefault();e.closeMenu(),R(()=>{var l;return(l=m(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})})}function s(){if(n.disabled)return e.goToItem(g.Nothing);e.goToItem(g.Specific,v)}function t(){n.disabled||c.value||e.goToItem(g.Specific,v,0)}function r(){n.disabled||!c.value||e.goToItem(g.Nothing)}return()=>{let{disabled:a}=n,l={active:c.value,disabled:a};return M({ourProps:{id:v,ref:o,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,onClick:I,onFocus:s,onPointermove:t,onMousemove:t,onPointerleave:r,onMouseleave:r},theirProps:n,slot:l,attrs:b,slots:p,name:"MenuItem"})}}});function re(n,p){return q(),z("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[J("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16M4 18h16"})])}export{ae as f,ne as m,le as p,re as r,oe as v};
