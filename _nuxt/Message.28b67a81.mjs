import{a as B,H as f,af as R,ag as q,ah as C,ai as Q,aj as Y,h as Z,ak as k,ab as O,al as H,v as x,a7 as J,o as X,G as ee,R as c,ac as te,ad as ne,s as oe,C as m,u as p,a8 as re,Z as A}from"./entry.b2d48240.mjs";import{a as ae,b as se,c as ie,d as le,u as ue}from"./index.85de3bff.mjs";import{m as de,r as ce,p as fe,v as D,f as pe}from"./MenuIcon.cec48d22.mjs";import"./use-outside-click.dba50023.mjs";import"./XIcon.af7c9baa.mjs";import"./use-resolve-button-type.7c80fd7a.mjs";var v=globalThis&&globalThis.__assign||function(){return v=Object.assign||function(o){for(var e,n=1,t=arguments.length;n<t;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r])}return o},v.apply(this,arguments)},ge=globalThis&&globalThis.__spreadArrays||function(){for(var o=0,e=0,n=arguments.length;e<n;e++)o+=arguments[e].length;for(var t=Array(o),r=0,e=0;e<n;e++)for(var a=arguments[e],d=0,l=a.length;d<l;d++,r++)t[r]=a[d];return t},I=function(){function o(){}return o.getComponentDefinition=function(e,n){var t;return typeof e=="string"?t=this.searchForComponentInstance(n,e):t={extends:B(v({},e))},t||console.error("Could not find component with name of "+e+". Is it in Vue.components?"),t.extends?(t.extends.setup&&(t.setup=t.extends.setup),t.extends.props=this.addParamsToProps(t.extends.props)):t.props=this.addParamsToProps(t.props),t},o.addParamsToProps=function(e){return!e||Array.isArray(e)&&e.indexOf("params")===-1?e=ge(["params"],e||[]):typeof e=="object"&&!e.params&&(e.params={type:Object}),e},o.createAndMountComponent=function(e,n,t){var r=o.getComponentDefinition(e,t);if(!!r){var a=this.mount(r,{params:Object.freeze(n)},t),d=a.vNode,l=a.destroy,i=a.el;return{componentInstance:d.component.proxy,element:i,destroy:l}}},o.mount=function(e,n,t){var r=f(e,n);r.appContext=t.$.appContext,r.appContext.provides=v(v({},r.appContext.provides?r.appContext.provides:{}),t.$parent.$options.provide?t.$parent.$options.provide:{});var a=document.createElement("div");R(r,a);var d=function(){a&&R(null,a),a=null,r=null};return{vNode:r,destroy:d,el:a}},o.searchForComponentInstance=function(e,n,t,r){t===void 0&&(t=10),r===void 0&&(r=!1);for(var a=null,d=e.$parent,l=0;!a&&d&&d.$options&&++l<t;){var i=d;a=i.$options&&i.$options.components?i.$options.components[n]:null,d=d.$parent}if(!a){var u=e.$.appContext.components;u&&u[n]&&(a=u[n])}return!a&&!r?(console.error("Could not find component with name of "+n+". Is it in Vue.components?"),null):a},o}(),P=globalThis&&globalThis.__extends||function(){var o=function(e,n){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},o(e,n)};return function(e,n){o(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}}(),me=function(o){P(e,o);function e(n){var t=o.call(this)||this;return t.parent=n,t}return e.prototype.createWrapper=function(n){var t=this,r=function(d){P(l,d);function l(){return d!==null&&d.apply(this,arguments)||this}return l.prototype.init=function(i){d.prototype.init.call(this,i)},l.prototype.hasMethod=function(i){return a.getFrameworkComponentInstance()[i]!=null},l.prototype.callMethod=function(i,u){var y=this.getFrameworkComponentInstance(),_=a.getFrameworkComponentInstance();return _[i].apply(y,u)},l.prototype.addMethod=function(i,u){a[i]=u},l.prototype.overrideProcessing=function(i){return t.parent.autoParamsRefresh&&i==="refresh"},l.prototype.processMethod=function(i,u){return i==="refresh"&&(this.getFrameworkComponentInstance().params=u[0]),this.hasMethod(i)?this.callMethod(i,u):i==="refresh"},l.prototype.createComponent=function(i){return t.createComponent(n,i)},l}(he),a=new r;return a},e.prototype.createComponent=function(n,t){return I.createAndMountComponent(n,t,this.parent)},e.prototype.createMethodProxy=function(n,t,r){return function(){return n.overrideProcessing(t)?n.processMethod(t,arguments):n.hasMethod(t)?n.callMethod(t,arguments):(r&&console.warn("AG Grid: Framework component is missing the method "+t+"()"),null)}},e.prototype.destroy=function(){this.parent=null},e}(q),he=function(){function o(){}return o.prototype.getGui=function(){return this.element},o.prototype.destroy=function(){this.getFrameworkComponentInstance()&&typeof this.getFrameworkComponentInstance().destroy=="function"&&this.getFrameworkComponentInstance().destroy(),this.unmount()},o.prototype.getFrameworkComponentInstance=function(){return this.componentInstance},o.prototype.init=function(e){var n=this.createComponent(e),t=n.componentInstance,r=n.element,a=n.destroy;this.componentInstance=t,this.unmount=a,this.element=r.firstElementChild},o}(),ve=function(o){return o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},ye=function(o){return"on"+o.charAt(0).toUpperCase()+o.substring(1,o.length)},we=function(){var o={},e=C.PUBLIC_EVENTS.map(function(t){return ye(ve(t))});e.forEach(function(t){return o[t]=void 0});var n={};return C.ALL_PROPERTIES.filter(function(t){return t!="gridOptions"}).forEach(function(t){o[t]={},n[t]={handler:function(r,a){this.processChanges(t,r,a)},deep:t!=="popupParent"&&t!=="context"}}),[o,n]},$=function(){function o(){}return o.hasChildColumns=function(e){return e&&e.default&&e.default().length>0},o.mapChildColumnDefs=function(e){return e.default().map(function(n){return o.toColDef(n)})},o.toColDef=function(e){var n=o.createColDefFromGridColumn(e);return e.children&&e.children.length>0&&(n.children=o.getChildColDefs(e.children)),n},o.getChildColDefs=function(e){return e.map(function(n){return o.createColDefFromGridColumn(n)})},o.createColDefFromGridColumn=function(e){var n={};return Object.assign(n,e.props),delete n.children,Q.BOOLEAN_PROPERTIES.forEach(function(t){var r=n;r[t]===""&&(r[t]=!0)}),n},o}(),Ce=globalThis&&globalThis.__extends||function(){var o=function(e,n){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},o(e,n)};return function(e,n){o(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}}(),be=function(o){Ce(e,o);function e(n){var t=o.call(this)||this;return t.parent=n,t}return e.prototype.frameworkComponent=function(n,t){var r=I.searchForComponentInstance(this.parent,n,10,!0)?n:null;if(!r&&t&&t[n]){var a=t[n];r=I.searchForComponentInstance(this.parent,a,10,!0)?a:null}return r},e.prototype.isFrameworkComponent=function(n){return typeof n=="object"},e}(Y),b=globalThis&&globalThis.__assign||function(){return b=Object.assign||function(o){for(var e,n=1,t=arguments.length;n<t;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r])}return o},b.apply(this,arguments)},_e=["rowDataChanged","rowDataUpdated","cellValueChanged","rowValueChanged"],S="onUpdate:modelValue",ke="update:modelValue",G=we(),Oe=G[0],xe=G[1],Ae=B({render:function(){return Z("div")},props:b({gridOptions:{type:Object,default:function(){return{}}},autoParamsRefresh:{type:Boolean,default:function(){return!1}},componentDependencies:{type:Array,default:function(){return[]}},plugins:[],modules:{type:Array,default:function(){return[]}},modelValue:{type:Array,default:void 0,required:!1}},Oe),data:function(){return{gridCreated:!1,isDestroyed:!1,gridReadyFired:!1,emitRowModel:void 0}},watch:b({modelValue:{handler:function(o,e){this.processChanges("rowData",o,e)},deep:!0}},xe),methods:{globalEventListener:function(o,e){this.isDestroyed||(o==="gridReady"&&(this.gridReadyFired=!0),this.updateModelIfUsed(o))},processChanges:function(o,e,n){if(this.gridCreated){if(this.skipChange(o,e,n))return;var t={};t[o]={currentValue:o==="rowData"?Object.isFrozen(e)?e:k(O(e)):e,previousValue:n},C.processOnChange(t,this.gridOptions,this.gridOptions.api,this.gridOptions.columnApi)}},checkForBindingConflicts:function(){var o=this;(o.rowData||this.gridOptions.rowData)&&o.modelValue&&console.warn("AG Grid: Using both rowData and v-model. rowData will be ignored.")},getRowData:function(){var o=[];return this.gridOptions.api.forEachNode(function(e){o.push(e.data)}),o},updateModelIfUsed:function(o){this.gridReadyFired&&this.$attrs[S]&&_e.indexOf(o)!==-1&&this.emitRowModel&&this.emitRowModel()},getRowDataBasedOnBindings:function(){var o=this,e=o.modelValue;return e||(o.rowData?o.rowData:o.gridOptions.rowData)},skipChange:function(o,e,n){if(this.gridReadyFired&&o==="rowData"&&this.$attrs[S]){if(e===n)return!0;if(e&&n){var t=e,r=n;if(t.length===r.length){for(var a=0;a<t.length;a++)if(t[a]!==r[a])return!1;return!0}}}return!1},debounce:function(o,e){var n;return function(){var t=function(){o()};window.clearTimeout(n),n=window.setTimeout(t,e)}}},mounted:function(){var o=this;this.emitRowModel=this.debounce(function(){o.$emit(ke,Object.freeze(o.getRowData()))},20);var e=new me(this),n=k(C.copyAttributesToGridOptions(O(this.gridOptions),this));this.checkForBindingConflicts();var t=this.getRowDataBasedOnBindings();n.rowData=t&&(Object.isFrozen(t)?t:k(O(t))),$.hasChildColumns(this.$slots)&&(n.columnDefs=$.mapChildColumnDefs(this.$slots));var r={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:new be(this),providedBeanInstances:{frameworkComponentWrapper:e},modules:this.modules};new H(this.$el,n,r),this.gridCreated=!0},unmounted:function(){this.gridCreated&&(this.gridOptions.api&&this.gridOptions.api.destroy(),this.isDestroyed=!0)}});const De=c("label",{for:"default-search",class:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-gray-300"},"Search",-1),Ie={class:"relative"},Te=c("div",{class:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"},[c("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1),Ee={class:"py-1"},Be={__name:"Message",props:{keyword:{type:String,default:""}},emits:["componentEvent","selectedData"],async setup(o,{emit:e}){let n,t;const r=o,a=x([{headerName:"ID",flex:1,field:"messageId"},{headerName:"Korean",width:180,valueGetter:ae,valueSetter:se,editable:!0},{headerName:"English",width:180,valueGetter:ie,valueSetter:le,editable:!0},{headerName:"USE",width:80,field:"isEnable",cellEditor:"agSelectCellEditor",cellEditorParams:{values:["Y","N"]},editable:!0}]),d=x({}),l=ue();let i=null;const u=x([]),y=([n,t]=J(()=>$fetch(l.value.mplatformUrl+"/api/messages",{method:"GET",headers:{Authorization:"Bearer "+l.value.apiToken}})),n=await n,t(),n),_=s=>{i=s.api,z()},U=s=>{if(s.node.data.messageId==="AUTO")return{background:"#d3d3d3"}},T=()=>{const s=[{messageId:"AUTO",isEnable:"Y",messageLangs:[{messageId:"AUTO",lang:"en",message:r.keyword},{messageId:"AUTO",lang:"ko",message:r.keyword}]}];i.applyTransaction({add:s,addIndex:0})},V=()=>{for(let s in u.value)F(u.value[s])},j=()=>{for(let s in u.value)M(u.value[s])},L=s=>[{name:"New message",action:()=>{T()},cssClasses:["bg-blue-400","font-bold"]},{name:"Save",disabled:!(s.node&&s.node.data.messageId==="AUTO"),action:()=>{F(s.node.data)},cssClasses:["bg-gray-200","font-bold"]},{name:"Delete",disabled:!s.node,action:()=>{M(s.node.data)},cssClasses:["bg-gray-200","font-bold"]}],E=()=>{i.setQuickFilter(r.keyword),i.deselectAll()},z=()=>{y.length>0?(i.setRowData(y),i.setQuickFilter(r.keyword)):i.setRowData([])},F=async s=>{const g=await $fetch(l.value.mplatformUrl+"/api/messages",{method:"POST",body:s,headers:{Authorization:"Bearer "+l.value.apiToken}});s.messageId=g.messageId,i.applyTransaction({update:[s]}),i.redrawRows()},M=async s=>{s.messageId!=="AUTO"&&await $fetch(l.value.mplatformUrl+"/api/messages/"+s.messageId,{method:"DELETE",headers:{Authorization:"Bearer "+l.value.apiToken}}),i.applyTransaction({remove:[s]})},N=async s=>{s.node.data.messageId!=="AUTO"&&await $fetch(l.value.mplatformUrl+"/api/messages",{method:"POST",body:K(s.node.data),headers:{Authorization:"Bearer "+l.value.apiToken}})},W=s=>{u.value=s.api.getSelectedRows(),e("componentEvent","select data",u.value)},K=s=>{let g="",h="";for(let w in s.messageLangs)s.messageLangs[w].lang=="en"?g=s.messageLangs[w].message:s.messageLangs[w].lang=="ko"&&(h=s.messageLangs[w].message);return{messageId:s.messageId,isEnable:s.isEnable,messageLangs:[{lang:"ko",messageId:s.messageId,message:h},{lang:"en",messageId:s.messageId,message:g}]}};return(s,g)=>(X(),ee("div",null,[De,c("div",Ie,[Te,te(c("input",{type:"search",maxlength:"30","onUpdate:modelValue":g[0]||(g[0]=h=>oe(keyword)?keyword.value=h:null),onChange:E,class:"block p-4 pl-10 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search label, messages ...",required:""},null,544),[[ne,o.keyword]]),c("button",{type:"submit",onClick:E,class:"text-white absolute right-17.5 bottom-1.8 h-10 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Search"),f(p(pe),{as:"div",class:"text-white absolute right-2 bottom-1.5"},{default:m(()=>[c("div",null,[f(p(de),{class:"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500"},{default:m(()=>[f(p(ce),{class:"block h-6 w-6","aria-hidden":"true"})]),_:1})]),f(re,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:m(()=>[f(p(fe),{class:"origin-top-right absolute z-50 right-0 mt-2 w-30 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{default:m(()=>[c("div",Ee,[f(p(D),null,{default:m(({active:h})=>[c("a",{onClick:T,class:A([h?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 text-sm"])},"New",2)]),_:1}),f(p(D),{disabled:u.value.length==0},{default:m(()=>[c("a",{onClick:V,class:A([u.value.length==0?"bg-gray-200 text-gray-500":"text-gray-700","block px-4 py-2 text-sm"])},"Save",2)]),_:1},8,["disabled"]),f(p(D),{disabled:u.value.length==0},{default:m(()=>[c("a",{onClick:j,class:A([u.value.length==0?"bg-gray-200 text-gray-500":"text-gray-700","block px-4 py-2 text-sm"])},"Delete",2)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1})]),f(p(Ae),{class:"ag-theme-alpine h-128 w-full mt-2",columnDefs:a.value,gridOptions:d.value,rowSelection:"single",onGridReady:_,getContextMenuItems:L,getRowStyle:U,onCellValueChanged:N,onSelectionChanged:W},null,8,["columnDefs","gridOptions"])]))}};export{Be as default};
